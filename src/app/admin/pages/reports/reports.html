<div class="page-container">
  <header class="page-header">
    <div class="header-text">
      <h2>Performance Analytics</h2>
      <p>Real-time student progress and grading overview</p>
    </div>
    <button class="download-btn" (click)="downloadReport()">
      <i class="fas fa-file-download"></i> Download Report
    </button>
  </header>

  <div class="chart-section card">
    <div class="card-header">
      <h3>Course Progress Distribution</h3>
    </div>
    <div class="chart-wrapper">
      <canvas id="performanceChart"></canvas>
    </div>
  </div>

  <div class="table-card card">
    <table class="report-table">
      <thead>
        <tr>
          <th>Student</th>
          <th>Course</th>
          <th>Progress Track</th>
          <th class="text-center">Grade</th>
        </tr>
      </thead>
      <tbody>
        @for (r of reports(); track $index) {
          <tr>
            <td>
              <div class="student-info">
                <span class="student-id">#{{ r.studentId }}</span>
                <strong>{{ r.studentName }}</strong>
              </div>
            </td>
            <td>
              <span class="course-tag">{{ r.courseName }}</span>
            </td>
            <td>
              <div class="progress-container">
                <div class="progress-bar-bg">
                  <div class="progress-bar-fill" 
                       [ngClass]="getGrade(r.progressPercentage).toLowerCase()"
                       [style.width.%]="r.progressPercentage > 100 ? 100 : r.progressPercentage">
                  </div>
                </div>
                <span class="percentage-text">{{ r.progressPercentage }}%</span>
              </div>
            </td>
            <td class="text-center">
              <span class="grade-pill" [ngClass]="getGrade(r.progressPercentage).toLowerCase()">
                {{ getGrade(r.progressPercentage) }}
              </span>
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="4" class="empty-state">
              <img src="assets/no-data.svg" alt="No data" class="empty-img">
              <p>No analytics available at the moment.</p>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>