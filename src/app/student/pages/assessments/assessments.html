<div class="assessment-container">
  <div class="assessment-grid">
    <div class="subject-card" *ngFor="let s of subjects">
      <div class="subject-header">
        <h3 class="subject-name">{{ s.name }}</h3>
        <span class="assessment-count">{{ assessmentsBySubject[s.id]?.length || 0 }} Tasks</span>
      </div>

      <div class="assessment-list">
        <div class="assessment-item" *ngFor="let a of assessmentsBySubject[s.id]">
          <div class="assessment-info">
            <span class="assessment-title">{{ a.title }}</span>
            <div class="assessment-meta">
              <span class="meta-badge">
                <i class="icon-marks"></i> Max {{ a.maxMarks }} marks
              </span>
              <span class="meta-badge" [class.limit-reached]="data.getAttemptCount(a.id) >= a.attempts">
                <i class="icon-attempts"></i>
                {{ data.getAttemptCount(a.id) }} / {{ a.attempts }} attempt(s) used
              </span>
            </div>
          </div>

          <div class="assessment-action">
            <a
              class="action-btn"
              [routerLink]="data.getAttemptCount(a.id) < a.attempts ? ['/student/assessment-quiz', a.id] : null"
              [class.btn-disabled]="data.getAttemptCount(a.id) >= a.attempts"
            >
              {{ data.getAttemptCount(a.id) >= a.attempts ? 'Limit Reached' : 'Take Assessment' }}
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
