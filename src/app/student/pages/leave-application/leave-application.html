<div class="leave-application-wrapper">
  <div class="page-header">
    <h2 class="page-title">Leave Request</h2>
    <p class="page-subtitle">Submit your absence request for review by the academic department.</p>
  </div>

  <div class="content-container">
    <div *ngIf="!isSubmitted; else successMessage" class="application-card">
      <div class="form-body">
        <div class="form-section">
          <label class="input-label" for="leaveDate">Proposed Leave Date</label>
          <div class="input-wrapper">
            <input type="date" id="leaveDate" [(ngModel)]="leaveDate" [min]="today" class="custom-input">
            <small class="input-hint">Select the first day of your absence.</small>
          </div>
        </div>

        <div class="form-section mt-4">
          <label class="input-label" for="reason">Justification / Reason</label>
          <textarea id="reason" [(ngModel)]="reason" class="custom-textarea" rows="5"
                    placeholder="Provide a brief explanation for your absence..."></textarea>
        </div>

        <div class="form-footer">
          <button (click)="onSubmit()" class="primary-submit-btn">
            Submit Application
          </button>
        </div>
      </div>
    </div>

    <ng-template #successMessage>
      <div class="success-card">
        <div class="success-icon-circle">
          <span class="material-icons">check</span>
        </div>
        <h3 class="success-title">Application Received</h3>
        <p class="success-text">Your request for <strong>{{ leaveDate | date:'mediumDate' }}</strong> has been logged. You will be notified once the instructor reviews it.</p>

        <div class="success-footer">
          <button (click)="isSubmitted = false; leaveDate=''; reason=''" class="secondary-btn">
            Create New Request
          </button>
        </div>
      </div>
    </ng-template>
  </div>
</div>
