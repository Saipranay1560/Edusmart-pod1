<div class="leave-application-wrapper">
  <div class="page-header">
    <h2 class="page-title">Leave Request</h2>
    <p class="page-subtitle">Submit your absence request for review by the academic department.</p>
  </div>

  <div class="content-container">
    <div *ngIf="!isSubmitted(); else successMessage" class="application-card">
      <div class="form-body">

        <div class="form-section">
          <label class="input-label" for="leaveDate">Proposed Leave Date</label>
          <div class="input-wrapper">
            <input type="date" id="leaveDate" [ngModel]="leaveDate()" (ngModelChange)="leaveDate.set($event)" [min]="today()" class="custom-input">
            <small class="input-hint">Select the first day of your absence.</small>
          </div>
        </div>

        <div class="form-section mt-4" *ngIf="leaveDate()">
          <label class="input-label" for="leaveType">Leave Category</label>
          <select id="leaveType" name="leaveType" [ngModel]="leaveType()" (ngModelChange)="leaveType.set($event)" class="custom-input">
  <option value="" disabled selected>Select a reason...</option>
  <option value="Sick Leave">Sick Leave</option>
  <option value="Family Function">Family Function</option>
  <option value="Medical Appointment">Medical Appointment</option>
  <option value="Other">Other</option>
</select>
        </div>



        <div class="form-footer">
          <button (click)="onSubmit()" [disabled]="isProcessing()" class="primary-submit-btn">
            {{ isProcessing() ? 'Submitting...' : 'Submit Application' }}
          </button>
        </div>
      </div>
    </div>

    <ng-template #successMessage>
      <div class="success-card">
        <div class="success-icon-circle">
          <span class="material-icons">check</span>
        </div>
        <h3 class="success-title">Application Received</h3>
        <p class="success-text">
          Your <strong>{{ leaveType() }}</strong> request for <strong>{{ leaveDate() | date:'mediumDate' }}</strong> has been logged.
        </p>

        <div class="success-footer">
          <button (click)="resetForm()" class="secondary-btn">
            Create New Request
          </button>
        </div>
      </div>
    </ng-template>
  </div>
</div>
